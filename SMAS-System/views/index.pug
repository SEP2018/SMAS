extends layout
block content
    header(class='header')
        div(class='top-header-bg')
            a(href='/')
                img(src='/img/logo.png' class='logo')
            div(class='header-user')
                div(class='username')
                    p Chloe Dizon
                    // above is placeholder
                img(src='/img/logoutbtn.png' class='logout-btn')
                // above needs link + logout
        div(class='nav-menu-bg')
            div(class='nav-menu-container')
                ul.nav-menu
                    li
                        a(href='/doctors') Doctors
                    li
                        a(href='/services') Services
                    li
                        a(href='/appointments/bookings') Bookings
                    li
                        a(href='/') Home

    div(class='banner-area')
        img(src='/img/homeBG.jpg' class='banner')
        div(class='banner-heading-position')
            h1(class='banner-heading') UTS Student Medical Appointment System


    div(class='about-section')
        div(class='about-side')
            h2 About Us
            div(class='about-description')
                p UTS Medical provide a range of health services to current students. Students may schedule medical appointments online using the SMAS system. Our highly qualified team is always ready to help. Unfortunately, walk-in appointments are not available at present.
                div(class='about-hours')
                    h2 Service Hours
                    table(class='service-hours')
                        tr
                            th(class='form-th') Monday - Friday
                            td(class='form-td') 9:00 am - 5:00pm
                        tr
                            th(class='form-th') Saturday - Sunday
                            td(class='form-td') 9:00 am - 5:00 pm
        div(class='booking-side')
            div(class='booking-form')
                h2 Book an Appointment
                form(method='POST' action='')
                    select#service(name='selectedService' class="form-item")
                        for service in allService
                            option(value=service.serviceID)=service.title
                    select#doctor(name='selectedStaff' class="form-item" disabled)
                    input#date(placeholder="Date" class="form-item" onfocus="(this.type='date')" name='time' required='true')
                    select#appointTime(class="form-item" name='appointTime' disabled)
                    input#description(placeholder="Description" class="form-item-desc" name='description' required='true')
                    p(class='form-feedback') Please allow up to ___ minutes for this appointment.
                    button.btn.btn-primary(type='submit' class='form-submit') Book an appointment

    div(class='service-area')
        h2(class='h2-service') Our Services
        div(class='home-items')
            for service in allService
                div(class='home-item-container')
                    a(href='/services')
                        img(src='/img/check-up.jpg' class='home-item')
                        div(class='img-overlay')
                            div(class='img-overlay-text')
                                p=service.description
                            // ALL NEED INFO FROM DATABASE
                    p(class='img-text-service')=service.title


    div(class='doctor-area')
        h2 Our Doctors
        div(class='home-items')
            div(class='home-item-container')
                a(href='/doctors')
                    img(src='/img/mackey.jpg' class='home-item')
                    div(class='img-overlay')
                        div(class='img-overlay-text')
                            p test
                p(class='img-text-doctor') Dr. Mackey
            div(class='home-item-container')
                a(href='/doctors')
                    img(src='/img/macnaughton.jpg' class='home-item')
                    div(class='img-overlay')
                        div(class='img-overlay-text')
                            p test
                p(class='img-text-doctor') Dr. MacNaughton
            div(class='home-item-container')
                a(href='/doctors')
                    img(src='/img/unsworth.jpg' class='home-item')
                    div(class='img-overlay')
                        div(class='img-overlay-text')
                            p test
                            // ALL NEED INFO FROM DATABASE
                p(class='img-text-doctor') Dr. Unsworth
            div(class='home-item-container')
                a(href='/doctors')
                    img(src='/img/walton.jpg' class='home-item')
                    div(class='img-overlay')
                        div(class='img-overlay-text')
                            p test
                p(class='img-text-doctor') Dr. Walton


    footer(class='footer')
        div(class='footer-bg')
            div(class='footer-content')
                img(src='/img/footer-logo.png' class='footer-logo')
                div(class='footer-contact')
                    p(class='footer-text') For any questions or enquiries, please contact 0412 345 678 | utsmedical@uts.edu.au
                div(class='footer-links')
                    ul.nav-menu
                        li
                            a(href='/doctors') Doctors
                        li
                            a(href='/services') Services
                        li
                            a(href='/appointments/bookings') Bookings
                        li
                            a(href='/') Home

    script.
        $(document).on("change", '#service', function (e) {
            var service = $(this).val();
            $.ajax({
                type: "POST",
                data: {service: service},
                url: 'services/' + service,
                dataType: 'json',
                success: function (json) {
                    var $el = $("#doctor");
                    $el.empty();
                    $el.removeAttr('disabled');
                    $.each(json, function () {
                        $el.append($("<option></option>")
                            .attr("value", this['staffID']).text(this['lastName']));
                    });
                }
            });

        });
        $(document).on("change", '#doctor, #date', function (e) {
            var doctor = $('#doctor').val();
            var service = $('#service').val();
            var date = $('#date').val();
            $.ajax({
                type: "POST",
                data: {doctor: doctor, service: service, date: date},
                url: 'appointments/times/' + doctor,
                dataType: 'json',
                success: function (json) {
                    var $el = $("#appointTime");
                    $el.empty();
                    $el.removeAttr('disabled');
                    $.each(json, function () {
                        var time = this['availableSlot'].substr(11, 8);
                        $el.append($("<option></option>")
                            .attr("value", this['availableSlot']).text(time));
                    });
                }
            });

        });